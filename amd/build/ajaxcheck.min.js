define(["jquery","core/ajax","core/notification"],function(a,b,c){var d,e=function(){return a("div.que input.submit")},f=function(b){return a("div#q"+b+" div.outcome")},g=function(b){return a("div#q"+b)},h=function(b){for(var c=0;c<b.questions.length;c++){var d=b.questions[c];g(d.slot).replaceWith(d.html),f(d.slot).slideDown("slow"),a("body").css("cursor","default")}e().click(i)},i=function(e){if(""!=e.target.name){e.preventDefault();var f=a(this.form).serializeArray();f.push({name:e.target.name,value:e.target.value}),a("body").css("cursor","progress"),a(e.target).prop("disabled","disabled"),a(e.target).prop("value",d);for(var g=null,i=null,j=0;j<f.length;j++)if("thispage"==f[j].name)i=f[j].value;else if("attempt"==f[j].name)g=f[j].value;else if(/^q[0-9]+:[0-9]+_[-a-z]+$/.test(f[j].name)){var k=/^q[0-9]+:([0-9]+)_([-a-z]+)$/.exec(f[j].name);a("div#q"+k[1]+" div.outcome").hide()}var l=b.call([{methodname:"quizaccess_ajaxcheck_process_attempt",args:{attemptid:g,data:f}},{methodname:"quizaccess_ajaxcheck_get_attempt_data",args:{attemptid:g,page:i}}]);l[0].fail(c.exception),l[1].done(h).fail(c.exception)}},j=function(a){d=a,e().click(i)};return{setup:j}});