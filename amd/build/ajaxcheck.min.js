define(["jquery","core/ajax","core/notification"],function(a,b,c){var d,e=function(){return a("div.que input.submit")},f=function(b){return a("div#q"+b+" div.outcome")},g=function(b){return a("div#q"+b)},h=function(b){for(var c=0;c<b.questions.length;c++){var d=b.questions[c];g(d.slot).replaceWith(d.html),f(d.slot).hide().slideDown("slow"),a("body").css("cursor","default")}e().click(j)},i=function(b){a("#mod_quiz_navblock div.content").html(b.navigationpanelhtml)},j=function(e){if(""!=e.target.name){e.preventDefault();var f=a(this.form).serializeArray();f.push({name:e.target.name,value:e.target.value}),a("body").css("cursor","progress"),a(e.target).prop("disabled","disabled"),a(e.target).prop("value",d);for(var g=null,j=null,k=0;k<f.length;k++)"thispage"==f[k].name?j=f[k].value:"attempt"==f[k].name&&(g=f[k].value);var l=b.call([{methodname:"quizaccess_ajaxcheck_process_attempt",args:{attemptid:g,data:f}},{methodname:"quizaccess_ajaxcheck_get_attempt_data",args:{attemptid:g,page:j}},{methodname:"quizaccess_ajaxcheck_get_navigation_panel_html",args:{attemptid:g,page:j}}]);l[0].fail(c.exception),l[1].done(h).fail(c.exception),l[2].done(i).fail(c.exception)}},k=function(a){d=a,e().click(j)};return{setup:k}});